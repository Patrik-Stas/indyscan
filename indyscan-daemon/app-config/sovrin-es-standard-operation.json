{
  "environment": {
    "$INDY_NETWORK": "sovrin-mainnet"
  },
  "comment": {
    "description": {
      "1": "This is sample daemon configuration for reading data out from Ledger and writing it to Elasticsearch, ",
      "2": "starting from lowest seqNo found in Elasticsearch (per subledger)."
    }
  },
  "objects": [
    {
      "interface": "SOURCE",
      "impl": "ledger",
      "params": {
        "id": "source.$INDY_NETWORK.domain",
        "subledger": "domain",
        "name": "SOVRIN_MAINNET",
        "genesisReference": "./genesis/SOVRIN_MAINNET.txn"
      }
    },
    {
      "interface": "SOURCE",
      "impl": "ledger",
      "params": {
        "id": "source.$INDY_NETWORK.config",
        "subledger": "config",
        "name": "SOVRIN_MAINNET",
        "genesisReference": "./genesis/SOVRIN_MAINNET.txn"
      }
    },
    {
      "interface": "SOURCE",
      "impl": "ledger",
      "params": {
        "id": "source.$INDY_NETWORK.pool",
        "subledger": "pool",
        "name": "SOVRIN_MAINNET",
        "genesisReference": "./genesis/SOVRIN_MAINNET.txn"
      }
    },
    {
      "interface": "SOURCE",
      "impl": "elasticsearch",
      "params": {
        "id": "source.target.$INDY_NETWORK.domain",
        "url": "$URL_ELASTICSEARCH",
        "subledger": "domain",
        "index": "txs-$INDY_NETWORK-domain"
      }
    },
    {
      "interface": "SOURCE",
      "impl": "elasticsearch",
      "params": {
        "id": "source.target.$INDY_NETWORK.config",
        "url": "$URL_ELASTICSEARCH",
        "subledger": "config",
        "index": "txs-$INDY_NETWORK-config"
      }
    },
    {
      "interface": "SOURCE",
      "impl": "elasticsearch",
      "params": {
        "id": "source.target.$INDY_NETWORK.pool",
        "url": "$URL_ELASTICSEARCH",
        "subledger": "pool",
        "index": "txs-$INDY_NETWORK-pool"
      }
    },
    {
      "interface": "TARGET",
      "impl": "elasticsearch",
      "params": {
        "id": "target.$INDY_NETWORK.domain",
        "url": "$URL_ELASTICSEARCH",
        "subledger": "domain",
        "index": "txs-$INDY_NETWORK-domain"
      }
    },
    {
      "interface": "TARGET",
      "impl": "elasticsearch",
      "params": {
        "id": "target.$INDY_NETWORK.config",
        "url": "$URL_ELASTICSEARCH",
        "subledger": "config",
        "index": "txs-$INDY_NETWORK-config"
      }
    },
    {
      "interface": "TARGET",
      "impl": "elasticsearch",
      "params": {
        "id": "target.$INDY_NETWORK.pool",
        "url": "$URL_ELASTICSEARCH",
        "subledger": "pool",
        "index": "txs-$INDY_NETWORK-pool"
      }
    },
    {
      "interface": "ITERATOR",
      "impl": "guided-iterator",
      "params": {
        "id": "iterator.$INDY_NETWORK.domain",
        "source": "source.$INDY_NETWORK.domain",
        "sourceSeqNoGuidance": "source.target.$INDY_NETWORK.domain"
      }
    },
    {
      "interface": "ITERATOR",
      "impl": "guided-iterator",
      "params": {
        "id": "iterator.$INDY_NETWORK.config",
        "source": "source.$INDY_NETWORK.config",
        "sourceSeqNoGuidance": "source.target.$INDY_NETWORK.config"
      }
    },
    {
      "interface": "ITERATOR",
      "impl": "guided-iterator",
      "params": {
        "id": "iterator.$INDY_NETWORK.pool",
        "source": "source.$INDY_NETWORK.pool",
        "sourceSeqNoGuidance": "source.target.$INDY_NETWORK.pool"
      }
    },
    {
      "interface": "PROCESSOR",
      "impl": "expansion",
      "params": {
        "id": "processor.expansion.$INDY_NETWORK",
        "sourceDomainLookups": "source.target.$INDY_NETWORK.domain"
      }
    },
    {
      "interface": "PIPELINE",
      "impl": "sequential",
      "params": {
        "id": "pipeline.$INDY_NETWORK.domain",
        "iterator": "iterator.$INDY_NETWORK.domain",
        "processor": "processor.expansion.$INDY_NETWORK",
        "target": "target.$INDY_NETWORK.domain",
        "timing": {
          "timeoutOnSuccess": 1000,
          "timeoutOnIteratorError": 5000,
          "timeoutOnTxNotAvailable": 4000,
          "jitterRatio": 0.4
        }
      }
    },
    {
      "interface": "PIPELINE",
      "impl": "sequential",
      "params": {
        "id": "pipeline.$INDY_NETWORK.config",
        "iterator": "iterator.$INDY_NETWORK.config",
        "processor": "processor.expansion.$INDY_NETWORK",
        "target": "target.$INDY_NETWORK.config",
        "timing": {
          "timeoutOnSuccess": 1000,
          "timeoutOnIteratorError": 5000,
          "timeoutOnTxNotAvailable": 4000,
          "jitterRatio": 0.4
        }
      }
    },
    {
      "interface": "PIPELINE",
      "impl": "sequential",
      "params": {
        "id": "pipeline.$INDY_NETWORK.pool",
        "iterator": "iterator.$INDY_NETWORK.pool",
        "processor": "processor.expansion.$INDY_NETWORK",
        "target": "target.$INDY_NETWORK.pool",
        "timing": {
          "timeoutOnSuccess": 1000,
          "timeoutOnIteratorError": 5000,
          "timeoutOnTxNotAvailable": 4000,
          "jitterRatio": 0.4
        }
      }
    }
  ]
}
